<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clube de Compras Korin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0fdf4;
        }
        .product-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-emerald-100 min-h-screen flex items-center justify-center py-10">
    <div class="container mx-auto p-4 bg-white rounded-xl shadow-2xl max-w-4xl border border-green-200">
        <h1 class="text-3xl md:text-4xl font-extrabold text-center text-emerald-800 mb-6">Clube de Compras Korin - Setembro 2025</h1>
        <p class="text-center text-gray-700 mb-6">Preencha as quantidades desejadas e o total será calculado automaticamente!</p>

        <blockquote class="text-center italic text-gray-600 mb-6 p-4 bg-green-50 rounded-lg border border-green-200 shadow-inner">
            "Respeitando-se e amando-se o solo, sua capacidade natural se manifestará ao máximo. Para tanto, o mais importante é não sujá-lo, mas torná-lo ainda mais puro. Com isso, ele ficará alegre e, logicamente, se tornará mais ativo."
            <footer class="mt-2 text-sm font-semibold text-emerald-700">— Meishu-Sama, Alicerce do Paraíso, vol. 5</footer>
        </blockquote>

        <div class="mb-6 p-4 bg-green-50 rounded-lg border border-green-200 shadow-inner">
            <h2 class="text-2xl font-semibold text-emerald-700 mb-4">Informações do Cliente</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="customerName" class="block text-gray-700 font-medium mb-2">Nome:</label>
                    <input type="text" id="customerName" class="w-full p-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition duration-200" placeholder="Seu nome completo">
                </div>
                <div>
                    <label for="customerAddress" class="block text-gray-700 font-medium mb-2">Johrei Center:</label>
                    <input type="text" id="customerAddress" class="w-full p-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition duration-200" placeholder="Seu Johrei Center">
                </div>
            </div>
        </div>

        <div id="productList" class="space-y-2"></div>

        <div class="mt-8 p-6 bg-emerald-100 rounded-lg border border-emerald-300 shadow-lg flex justify-between items-center">
            <h2 class="text-3xl font-bold text-emerald-800">Total Geral:</h2>
            <span id="grandTotal" class="text-4xl font-extrabold text-emerald-900">R$ 0,00</span>
        </div>

        <div class="mt-8 text-center">
            <button id="placeOrderBtn" class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-4 px-8 rounded-full shadow-lg transform transition duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-emerald-300">
                Finalizar Pedido
            </button>
        </div>

        <div id="orderSummaryModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-lg p-8 shadow-xl max-w-lg w-full transform transition-all duration-300 scale-95 opacity-0" id="modalContent">
                <h3 class="text-2xl font-bold text-emerald-800 mb-4">Resumo do Pedido</h3>
                <p class="text-sm text-gray-600 mb-4">Copie o pedido abaixo e envie para a sua vendedora <b>e no WhatsApp</b>.</p>
                <div id="summaryDetails" class="mb-6 text-gray-700 whitespace-pre-wrap"></div>
                <div class="flex justify-end space-x-4">
                    <button id="closeModalBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition duration-200">Fechar</button>
                    <button id="copyOrderBtn" class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200">Copiar Pedido</button>
                </div>
            </div>
        </div>

        <div id="copySuccessMessage" class="fixed bottom-5 right-5 bg-emerald-600 text-white px-4 py-2 rounded-lg shadow-lg hidden z-50">
            Pedido copiado!
        </div>
    </div>

    <script>
        const products = [
            { "name": "COXA NGMO 1KG", "price": 13.50, "category": "TABELA AÇÃO SOCIAL" },
            { "name": "COXINHA ASA NGMO 1KG", "price": 14.75, "category": "TABELA AÇÃO SOCIAL" },
            { "name": "SOBRECOXA NGMO 1KG", "price": 19.50, "category": "TABELA AÇÃO SOCIAL" },
            { "name": "FIGADO NGMO 1KG", "price": 8.00, "category": "TABELA AÇÃO SOCIAL" }, // Preço atualizado: 8.00
            { "name": "PÉ NGMO 1KG", "price": 8.50, "category": "TABELA AÇÃO SOCIAL" },
            { "name": "OVOS S/TRANSG CAIPIRA VERM GRANDE C/ 20 UN", "price": 23.50, "category": "TABELA AÇÃO SOCIAL" }, // Preço atualizado: 23.50
            { "name": "CARNE MOIDA DE FRANGO S/TRANSG 400G", "price": 19.95, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 19.95
            { "name": "FILE PEITO NGMO 600G", "price": 34.00, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 34.00
            { "name": "HAMBURGUER FRANGO NGMO 360G", "price": 27.60, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 27.60
            { "name": "ESPETINHO DE FILE DE COXA NGMO TEMP 400G", "price": 18.50, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 18.50
            { "name": "ARROZ AGULHINHA POLIDO ORG 1KG", "price": 23.55, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 23.55
            { "name": "ARROZ AGULHINHA INTEGRAL ORG 1KG", "price": 22.50, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 22.50
            { "name": "FEIJAO CARIOCA ORG 500G", "price": 16.15, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 16.15
            { "name": "FEIJAO PRETO ORG 500G", "price": 14.50, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 14.50
            { "name": "FARINHA DE MILHO (FUBA) ORG. 500G", "price": 10.30, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 10.30
            { "name": "SPRAY MEL E PROPOLIS ORG SABOR HORTELA 30ML", "price": 15.50, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 15.50
            { "name": "EXTRATO DE PROPOLIS VERDE ORG 30ML", "price": 24.20, "category": "TABELA COMPLEMENTAR" }, // Preço atualizado: 24.20
            { "name": "MEL ORG BISNAGA 300G", "price": 25.66, "category": "TABELA COMPLEMENTAR" } // Preço atualizado: 25.66
        ];

        const productListDiv = document.getElementById('productList');
        const grandTotalSpan = document.getElementById('grandTotal');
        const placeOrderBtn = document.getElementById('placeOrderBtn');
        const orderSummaryModal = document.getElementById('orderSummaryModal');
        const modalContent = document.getElementById('modalContent');
        const summaryDetailsDiv = document.getElementById('summaryDetails');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const copyOrderBtn = document.getElementById('copyOrderBtn');
        const customerNameInput = document.getElementById('customerName');
        const customerAddressInput = document.getElementById('customerAddress');
        const copySuccessMessage = document.getElementById('copySuccessMessage');

        let currentOrder = {};

        function renderProducts() {
            productListDiv.innerHTML = '';
            const groupedProducts = products.reduce((acc, product) => {
                const category = product.category || 'Outros Produtos';
                if (!acc[category]) acc[category] = [];
                acc[category].push(product);
                return acc;
            }, {});

            for (const category in groupedProducts) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'mb-6';

                const categoryTitle = document.createElement('h2');
                categoryTitle.className = 'text-2xl font-semibold text-emerald-700 mb-4 pb-2 border-b-2 border-emerald-300';
                categoryTitle.textContent = category;
                categoryDiv.appendChild(categoryTitle);

                groupedProducts[category].forEach((product, index) => {
                    const productId = `product-${product.name.replace(/[^a-zA-Z0-9]/g, '')}-${index}`;
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card flex flex-row items-center justify-between bg-white p-4 rounded-lg shadow-md mb-2 border border-green-100';

                    productCard.innerHTML = `
                        <div class="flex-1 min-w-[200px]">
                            <p class="text-lg font-medium text-gray-800 whitespace-normal break-words">${product.name}</p>
                            <p class="text-emerald-600 font-semibold">R$ ${product.price.toFixed(2).replace('.', ',')}</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <input type="number" id="${productId}" 
                                data-price="${product.price}" 
                                data-name="${product.name}"
                                class="quantity-input w-24 p-2 border border-green-300 rounded-md text-center focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition duration-200"
                                value="${currentOrder[productId] || ''}" min="0" step="1" placeholder="Qtd">
                            <span id="total-${productId}" class="text-lg font-bold text-emerald-700 w-24 text-right">R$ 0,00</span>
                        </div>
                    `;
                    categoryDiv.appendChild(productCard);
                });
                productListDiv.appendChild(categoryDiv);
            }

            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('input', updateTotals);
            });
            updateTotals();
        }

        function updateTotals() {
            let grandTotal = 0;
            document.querySelectorAll('.quantity-input').forEach(input => {
                const quantity = parseFloat(input.value) || 0;
                const price = parseFloat(input.dataset.price);
                const itemTotal = quantity * price;
                document.getElementById(`total-${input.id}`).textContent = `R$ ${itemTotal.toFixed(2).replace('.', ',')}`;
                grandTotal += itemTotal;
                currentOrder[input.id] = quantity;
            });

            grandTotalSpan.textContent = `R$ ${grandTotal.toFixed(2).replace('.', ',')}`;
        }

        function generateOrderSummary() {
            const customerName = customerNameInput.value.trim();
            const customerAddress = customerAddressInput.value.trim();
            let summaryText = '';

            if (customerName) summaryText += `Nome: ${customerName}\n`;
            if (customerAddress) summaryText += `Johrei Center: ${customerAddress}\n`;
            if (customerName || customerAddress) summaryText += '\n';

            summaryText += '--- Detalhes do Pedido ---\n';
            let hasItems = false;

            document.querySelectorAll('.quantity-input').forEach(input => {
                const quantity = parseFloat(input.value) || 0;
                if (quantity > 0) {
                    hasItems = true;
                    const price = parseFloat(input.dataset.price);
                    const productName = input.dataset.name || "Produto Desconhecido";
                    const itemTotal = quantity * price;
                    summaryText += `${productName} - Qtd: ${quantity} x R$ ${price.toFixed(2).replace('.', ',')} = R$ ${itemTotal.toFixed(2).replace('.', ',')}\n`;
                }
            });

            if (!hasItems) summaryText += 'Nenhum item selecionado.\n';

            summaryText += `\nTotal Geral: ${grandTotalSpan.textContent}\n`;
            return summaryText;
        }

        placeOrderBtn.addEventListener('click', () => {
            summaryDetailsDiv.textContent = generateOrderSummary();
            orderSummaryModal.classList.remove('hidden');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 50);
        });

        closeModalBtn.addEventListener('click', () => {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                orderSummaryModal.classList.add('hidden');
            }, 300);
        });

        copyOrderBtn.addEventListener('click', () => {
            const orderText = summaryDetailsDiv.textContent;
            navigator.clipboard.writeText(orderText).then(() => {
                copySuccessMessage.classList.remove('hidden');
                setTimeout(() => {
                    copySuccessMessage.classList.add('hidden');
                }, 2000);
            }).catch(err => {
                console.error('Falha ao copiar texto: ', err);
            });
        });

        document.addEventListener('DOMContentLoaded', renderProducts);
    </script>
</body>
</html>
